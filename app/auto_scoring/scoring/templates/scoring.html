{% extends 'base.html' %}
{% block content %}
<section class="scoring">
    <div class="con">
        <form enctype='multipart/form-data' method="POST" id="mainform">
            {% csrf_token %}
            <div id="default">
                <table>
                    {{form}}
                </table>
                <div class="submit">
                    <a onclick="cust('0')" class="waves-effect waves-light btn">button</a>
                </div>
            </div>
            {% for key, value in dic.items %}
                <div class="none" id="{{key}}">
                    <div class="file-field input-field">
                        <div class="btn">
                            <span>File</span>
                            <input type="file" name="file{{key}}" id="{{value}}">
                        </div>
                        <div class="file-path-wrapper">
                            <input class="file-path validate" type="text">
                        </div>
                    </div>
                    <input type="number" name="{{value}}">
                    <div style="height: 200px;">
                        <img src="" id="preview-{{value}}" width="200px" />
                    </div>
                    <div class="submit">
                        <a onclick="cust('{{key}}')" class="waves-effect waves-light btn">button</a>
                    </div>
                </div>
            {% endfor %}
            <div id="submit_id" class="view_score">
                <input type="submit" class="btn btn-dark" value="submit">
            </div>
        </form>
    </div>
</section>
<script>
    function cust(arg){
        if(arg == '0'){
            $('#default').css('display','none');
        }
        if(arg == '4'){
            $('#submit_id').css('display','unset');
        }
        temp = '#' + arg;
        next = '#' + String(Number(arg) + 1);
        $(temp).css('display','none');
        $(next).css('display','unset');
    }
</script>

<script>
    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                imgId = '#preview-'+$(input).attr('id');
                $(imgId).attr('src', e.target.result);
            }

            reader.readAsDataURL(input.files[0]);
        }
    }
    $("form#mainform input[type='file']").change(function(){
        readURL(this);
        });
</script>


{% endblock content %}
